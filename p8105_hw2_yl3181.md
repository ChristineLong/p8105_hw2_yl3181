p8105\_hw2\_yl3181
================
Yuelin Long
September 28, 2018

Problem 1
---------

Read and Clean the data. Generate a summary of the data.

``` r
library(tidyverse)
```

    ## -- Attaching packages ------------------------------------------------------- tidyverse 1.2.1 --

    ## v ggplot2 3.0.0     v purrr   0.2.5
    ## v tibble  1.4.2     v dplyr   0.7.6
    ## v tidyr   0.8.1     v stringr 1.3.1
    ## v readr   1.1.1     v forcats 0.3.0

    ## -- Conflicts ---------------------------------------------------------- tidyverse_conflicts() --
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
nyc_subway = read_csv("NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
             janitor::clean_names() %>%
             select(line:entry,vending, ada) %>% 
             mutate(entry = recode(entry, "YES" = as.logical(1), "NO" = as.logical(0))) %>% 
             gather(key = route_num, value = route_val, starts_with("route")) %>%
             separate(route_num, into = c("extra_route","route"), sep = 5) %>%
             select(-extra_route) %>%
             filter(!is.na(route_val))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
nyc_distinct_stations = distinct(nyc_subway, line, station_name, .keep_all = TRUE)
```

Summary:

-   Data name: nyc\_subway
-   Variables included: line, station\_name, station\_latitude, station\_longitude, entrance\_type, entry, vending, ada, route, route\_val
-   Data cleaning steps: clean names -&gt; select variables needed -&gt; change character variables to logical -&gt; gather route variables together -&gt; clean route\_num variable
-   Data dimension (rows x columns): 4270, 10

Answer to the questions:

-   Number of distinct stations: 465
-   Number of stations with ADA compliance: 84
-   Proportion of station entrance without vending: 0.5555556
-   Number of distinct stations serving A train: 60
-   Number of distinct stations serving A train with ADA compliance: 17

Problem 2
---------

Load the datasets:

``` r
mr_trash = readxl::read_excel("HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N258") %>%
    janitor::clean_names() %>%
    filter(!is.na(dumpster)) %>%
    mutate(sports_balls = as.integer(sports_balls))

trash_2016 = readxl::read_excel("HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2016 Precipitation", range = "A2:B14") %>%
    janitor::clean_names() %>%
    mutate(year = 2016) %>%
    filter(!is.na(total))

trash_2017 = readxl::read_excel("HealthyHarborWaterWheelTotals2017-9-26.xlsx", sheet = "2017 Precipitation", range = "A2:B14") %>%
    janitor::clean_names() %>%
    mutate(year = 2017) %>%
    filter(!is.na(total))

library(plyr)
```

    ## -------------------------------------------------------------------------

    ## You have loaded plyr after dplyr - this is likely to cause problems.
    ## If you need functions from both plyr and dplyr, please load plyr first, then dplyr:
    ## library(plyr); library(dplyr)

    ## -------------------------------------------------------------------------

    ## 
    ## Attaching package: 'plyr'

    ## The following objects are masked from 'package:dplyr':
    ## 
    ##     arrange, count, desc, failwith, id, mutate, rename, summarise,
    ##     summarize

    ## The following object is masked from 'package:purrr':
    ## 
    ##     compact

``` r
trash_2016_2017 = bind_rows(trash_2016, trash_2017)  %>%
    janitor::clean_names() %>%
    dplyr::rename(precipitation = total) %>%
    mutate(month = mapvalues(month,from = c(1:12), to = month.name))
```

Data summary:

-   The total N for Mr. Trash is 215, while the examples of key variables are dumpster, month, year, date, weight\_tons, volume\_cubic\_yards, plastic\_bottles
-   The total N for Mr. Trash is 20 , while the key variables are month, precipitation, year
-   The total precipitation in 2017 is 29.93
-   The median number of sports balls in a dumpster in 2016 is 26

Problem 3
---------

``` r
library(p8105.datasets)
brfss = janitor::clean_names(brfss_smart2010) %>%
    filter(topic == "Overall Health") %>%
    select(year:locationdesc, response, data_value) %>%
    spread(key = response, value = data_value) %>%
    mutate(excellent_verygood = Excellent + `Very good`) 
```

Data Summary:

-   Number of unique locations is 404
-   Is every state represented: TRUE
-   State that is observed the most: NJ
-   In 2002, the median of the “Excellent” response value is 23.6
