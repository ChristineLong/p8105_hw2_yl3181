---
title: "p8105_hw2_yl3181"
author: "Yuelin Long"
date: "September 28, 2018"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Problem 1

Read and Clean the data. Generate a summary of the data.
```{r}
library(tidyverse)
nyc_subway = read_csv("NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
             janitor::clean_names() %>%
             select(line:entry,vending, ada) %>% 
             mutate(entry = recode(entry, "YES" = as.logical(1), "NO" = as.logical(0))) %>% 
             gather(key = route_num, value = route_val, starts_with("route")) %>%
             separate(route_num, into = c("extra_route","route"), sep = 5) %>%
             select(-extra_route) %>%
             filter(!is.na(route_val))

nyc_distinct_stations = distinct(nyc_subway, line, station_name, .keep_all = TRUE)
```

Summary:

+ Data name: nyc_subway
+ Variables included: `r names(nyc_subway)`
+ Data cleaning steps: clean names -> select variables needed -> change character variables to logical -> gather route variables together -> clean route_num variable
+ Data dimension (rows x columns): `r dim(nyc_subway)`


Answer to the questions:

+ Number of distinct stations: `r nrow(nyc_distinct_stations)`
+ Number of stations with ADA compliance: `r nrow(nyc_distinct_stations[nyc_distinct_stations$ada == 1,])`
+ Proportion of station entrance without vending: `r nrow(nyc_distinct_stations[(nyc_distinct_stations$vending == "NO")&(nyc_distinct_stations$entry == "TRUE"),]) /  nrow(nyc_distinct_stations[nyc_distinct_stations$vending == "NO",])`
+ Number of distinct stations serving A train: `r nrow(nyc_distinct_stations[nyc_distinct_stations$route_val == "A",])`
+ Number of distinct stations serving A train with ADA compliance: `r nrow(nyc_distinct_stations[nyc_distinct_stations$route_val == "A" & nyc_distinct_stations$ada == "TRUE",])`